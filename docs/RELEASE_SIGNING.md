# Release Signing

usnpw maintainers publish SHA-256 checksum sidecars for all release artifacts.
CI also produces detached GPG signatures for those checksum files.
Unsigned releases should not be used.

## GPG Signatures for Checksum Sidecars
CI signs each `*.sha256` file generated by `tools/release.py` and uploads:
- `*.sha256.asc` (detached ASCII-armored signatures)
- `usnpw-release-publickey.asc` (public key for verification)

Artifact name: `usnpw-signatures`  
Workflow: `.github/workflows/release-artifacts.yml`

## Required Repository Secrets
- `USNPW_GPG_PRIVATE_KEY` (ASCII-armored private key, required)
- `USNPW_GPG_PASSPHRASE` (optional, for passphrase-protected keys)

The release workflow fails if `USNPW_GPG_PRIVATE_KEY` is missing.

## Consumer Verification Flow
1. Import the public key:
   `gpg --import usnpw-release-publickey.asc`
2. Verify checksum signature:
   `gpg --verify <artifact>.sha256.asc <artifact>.sha256`
3. Verify artifact checksum:
   Linux/macOS: `sha256sum -c <artifact>.sha256`  
   PowerShell: `Get-FileHash <artifact> -Algorithm SHA256`
